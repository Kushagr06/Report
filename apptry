

import urllib.request, urllib.parse, urllib.error
from bs4 import BeautifulSoup
import ssl
import json



# Ignore SSL certificate errors
ctx = ssl.create_default_context()
ctx.check_hostname = False
ctx.verify_mode = ssl.CERT_NONE


#key=input('Enter API Key:')
key=input("Enter busines id")

url='https://api.test.esamudaay.com/api/v1/businesses/'+key+'/report'

html = urllib.request.urlopen(url, context=ctx).read()

soup = BeautifulSoup(html, 'html.parser')
# Retrieve all the info
maintext=soup.prettify()

info=json.loads(maintext)

store=info[0]["business_name"]
print('Business Name:',store )
for bit in info:
  if store!=bit["business_name"]:
    print(bit["business_name"])
  
  if bit["failure_reasons"]!= None:
    print("Falure with Complaince Report due to:", bit[  "failure_reasons"])

 



